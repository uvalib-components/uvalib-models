<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../uvalib-helper-libs/lodash.html">
<link rel="import" href="../promise-polyfill/promise-polyfill-lite.html">
<link rel="import" href="../uvalib-helper-libs/fetch.html">

<script>
  /**
   * @demo demo/index.html
   * @polymerBehavior uvalibbehavior.modelStatic
   */
  window.uvalibbehaviors = window.uvalibbehaviors || {};
  uvalibbehaviors.modelStatic = {
    properties: {
      /**
       * The data for the model from the Library API
       *
       * @type {Object[]}
       */
      data: {
        type: Array,
        value: [],
        readOnly: true,
        notify: true
      },
      _path: {
        type: String,
        value: ""
      },
      _baseURL: {
        type: String,
        value: "https://uvalib-api.firebaseio.com"
      }
    },
    ready: function(){
      fetch( this._baseURL + this._path + ".json" )
        .then(function(response){
          response.json().then(function(data){
            this._setData( _.values(data) );
          }.bind(this));
        }.bind(this))
        .catch(function(ex){
          console.log('parsing json failed', ex);
        });
    },

  };

</script>
